# 我的量化工具使用说明

## 策略的交易理念
- md，铤而走险
- anchor锚点趋势，趋势反转
- 多品种轮动，资金的利用效率

## mt4的使用教学
- 外汇交易账户
    - 选择一个外汇交易商，避免大额资金防范交易商跑路风险
    - 申请一个demo账户
    - 申请一个真实账户
- 什么是外汇
- 一个外汇品种包含哪些东西
- 交易的成本
    - 手续费commission
    - 点差spread
    - 过夜费/掉期/持仓费 swap/warehousing
    - 滑点
- mt4中的自动化交易程序EA
实际中的EA不一定是用来交易的，有可能只是一个观察分析工具。
    - 回测EA
    - 在demo账户中实时使用EA交易
        - 加载ea，配置ea参数
        - 打开mt交易开关
        - 打开ea交易开关
    - 在真实账户中实时使用EA交易。其步骤与demo账户完全相同。
    - EA的交易风险
        - EA可能乱来，要注意防范风险。
        - 不要轻信别人短期的高额收益率诱惑。一个不在大额真实账户下经过多年验证的EA都是不
        足信的。因为小额账户的试错成本很低，在外汇短期盈利也基本上不能说明问题。
        - 理论上mt程序可以做任何程序可以做的事，因此要避免运行来历不明的EA。
        即使是在demo账户或测试环境，在借助dll工具的情况下，它仍然有能力读写所有
        电脑数据，埋下木马病毒。
## 我的多品种趋势md EA部署
- 我会写一个安装脚本
    - 在系统中安装好mt4，并运行一次。登录交易账户。
    - 我的文件解压到安装目录，然后运行安装脚本。
    - 再次打开mt4，选择mult md视图。如果一切正常，这时mt应该就会开始按照默认配置运行交易策略。
- 安装脚本做了什么。如果安装脚本失效，需要修复，可按照下面的指导进行人工配置。
    - 在windows用户目录下找到这个mt4的数据目录。因为可以一个机器安装多个mt4, mt5, 每个安装
    都有一个唯一独立的数据目录。
    - copy ea程序到数据目录的mql4/experts/ 目录，copy 指标程序到mql4/indicators/ 目录，
    - copy 参数配置文件到mql4/files 目录，在mql4/files目录下生成必要的外链以便ea读取非files下的文件。
    其中的conf文件是各个品种的ea配置文件。如果将来要迭代修改策略参数，需要在这些conf文件中修改。
    - copy 视图文件到profiles目录下，profiles的配置文件配置了具体交易的品种，交易窗口的配置，加载的ea
    以及ea的参数配置。
## 策略的更新
随着国际局势的变化，以及新的行情出来，需要尽可能的选择在历史上运行的稳定的参数组合。
虽然历史不代表未来。所以需要在新的历史数据上重新回测所有参数配置，重新调整。

以下步骤仅适于当前的mt4环境。如果未来要转移到mt5，数据导入、回测的方法会完全不同，目前我不想处理。
- 数据准备
    - 数据来源于dukascopy，连接vpn才能下载
    - 一个程序下载数据，矫正时区
    - 一个程序生成测试数据文件，并与历史文件进行合并。如果将来mt官方升级，导致测试文件格式改变，不再兼容，
    或者因为本地测试环境改变，这个程序可能失效。可以考虑手动生成。
    - 手动生成
        - 一个程序将下载的数据导出成csv格式的tick数据
        - 将csv格式数据导入StrategyQuant
        - 从StrategyQuant导出到mt
- 运行测试
    - 配置：测试品种、EA、参数集目前都已配置，若不懂程序不要修改。
    - 生成测试参数文件
    - 批量运行测试，生成测试结果
- 分析测试结果，产出新的配置组合
    - 配置：分析的年份，输出的策略个数，优化目标
    - 合并历史测试结果
    - 报告解读，产出报告应包含单项策略和总体的历史回测的交易数据(可以用脚本直接观察的)、回撤MAE、利润profit
    - 根据实际资金量量力而行
- 开放课题
    - mt5是未来的趋势，现在mt4仍然有很多历史用户，但未来新的玩家、交易商都必然倾向于使用mt5。
    因为某些原因，我初始接触时在mt4上开发，生长出目前的这套系统。要转移到mt5上代价很大。在没有
    看到明确收益效果前，没必要进行这种迁移。
    - 对md参数中的波动率参数，var_ratio, gap两大参数需要再优选，目前算力不足难以深入。
    - 每次全量的运行测试非常耗时。需要引入DFO(decision free optimization),
    DRL(deep reinforcement learning)在人工智能算法在加速参数调优。mt自带的遗传算法我总觉得不太靠谱。
    - 测试不同的初始入场点来测试策略的稳定性。目前的测试方法下，入场点缺乏一定的随机性。
    